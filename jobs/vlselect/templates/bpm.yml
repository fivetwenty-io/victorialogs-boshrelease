---
processes:
  - name: vlselect
    executable: /var/vcap/jobs/vlselect/bin/vlselect
    persistent_disk: false
    ephemeral_disk: false

    limits:
      open_files: 65536

    env:
      DOCKER_HOST: unix:///var/vcap/sys/run/docker/docker.sock
      VLSELECT_PORT: <%= p('vlselect.port') %>
      VLSELECT_LOG_LEVEL: <%= p('vlselect.log_level') %>

    unsafe:
      privileged: true

    additional_volumes:
      - path: /var/vcap/sys/run/docker/docker.sock
        writable: true
      - path: /var/vcap/sys/run/ready
        writable: true
