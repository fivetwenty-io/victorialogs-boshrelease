---
processes:
  - name: victorialogs
    executable: /var/vcap/jobs/victorialogs/bin/victorialogs
    persistent_disk: true
    ephemeral_disk: false

    limits:
      open_files: 65536

    env:
      DOCKER_HOST: unix:///var/vcap/sys/run/docker/docker.sock
      VICTORIALOGS_PORT: <%= p('victorialogs.port') %>
      VICTORIALOGS_STORAGE_PATH: <%= p('victorialogs.storage_path') %>
      VICTORIALOGS_LOG_LEVEL: <%= p('victorialogs.log_level') %>

    unsafe:
      privileged: true

    additional_volumes:
      - path: /var/vcap/sys/run/docker/docker.sock
        writable: true
      - path: /var/vcap/sys/run/ready
        writable: true
